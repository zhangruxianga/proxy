pa: &pa {type: http, interval: 21600, health-check: {enable: false, url: "https://www.apple.com/library/test/success.html", interval: 300}, lazy: true}
pb: &pb {type: http, interval: 21600, health-check: {enable: true, url: "https://www.apple.com/library/test/success.html", interval: 300}, lazy: true}
proxy-providers:
  ç¥žå™¨ðŸ”¶:
    <<: *pb
    exclude-filter: "å¥—é¤|shenseven|âœ°âœ°|â˜…â˜…"
    exclude-type: "vless|vmess|trojan"
    path: ./proxies/ç¥žå™¨.yaml
    override:
      additional-prefix: "ðŸ”¶"
    url: "https://sub.imtp.eu.org/api/v1"
    proxy: Airpo

  æœ€å¥½ðŸ’Ž:
    <<: *pa
    exclude-filter: "è‡ªåŠ¨æœ€ä¼˜"
    path: ./proxies/æœ€å¥½.yaml
    override:
      additional-prefix: "ðŸ’Ž"
    url: "https://rcvws73c.pronetwork.top"
    proxy: Airpo

  é­”æˆ’ðŸ’«:
    <<: *pa
    exclude-filter: "å®˜ç½‘|è‡ªåŠ¨|å¥—é¤|è¿‡æ»¤"
    path: ./proxies/é­”æˆ’.yaml
    override:
      additional-prefix: "ðŸ’«"
    url: "https://mojie.co/api/v1/client"
    proxy: Airpo

  å¿«è·‘ðŸƒ:
    <<: *pa
    exclude-filter: "å®˜ç½‘|åˆ°æœŸ|å…¬ç›Š|x2|x3|x4"
    path: ./proxies/å¿«è·‘.yaml
    override:
      additional-prefix: "ðŸƒ"
    url: "https://v1.kpy.edu.kg/"
    proxy: Airpo

  å›½é™…ðŸš:
    <<: *pa
    exclude-filter: "ä»¥ä¸‹ä¸º|å›žå›½|å®˜ç½‘"
    path: ./proxies/å›½é™….yaml
    override:
      additional-prefix: "ðŸš"
    url: "https://xtls.rprx.vision/api/v1"
    proxy: Airpo

proxies:
  - {name: ðŸŸ¢Direct, type: direct, udp: true}
  - {name: ðŸ›‘Reject, type: reject}
  - {name: ðŸ§­Dnsbak, type: dns}
pr: &pr {type: select, proxies: [ðŸŸ¢Direct, Domes, Forein]}
pt: &pt {exclude-filter: "CN|å¾å·ž|æ­¦æ±‰|æµŽå—|å‰©ä½™"}
proxy-groups:
  - {name: Airpo, <<: *pr, icon: https://raw.githubusercontent.com/zhangruxianga/proxy/refs/heads/master/icon/Airpo.png}
  - {name: Apple, <<: *pr, icon: https://raw.githubusercontent.com/zhangruxianga/proxy/refs/heads/master/icon/Apple.png}
  - {name: Aroce, type: select, proxies: [ðŸŸ¢Direct, Forein, Domes], use: [å¿«è·‘ðŸƒ], <<: *pt, icon: https://raw.githubusercontent.com/zhangruxianga/proxy/refs/heads/master/icon/Aroce.png}
  - {name: Cloud, type: select, proxies: [ðŸŸ¢Direct, Forein, Domes], use: [å¿«è·‘ðŸƒ], <<: *pt, icon: https://raw.githubusercontent.com/zhangruxianga/proxy/refs/heads/master/icon/Cloud.png}
  - {name: Domes, type: select, proxies: [ðŸŸ¢Direct, Forein], use: [å¿«è·‘ðŸƒ, å›½é™…ðŸš], filter: "CN|ç”µä¿¡|è”é€š|ç§»åŠ¨", icon: https://raw.githubusercontent.com/zhangruxianga/proxy/refs/heads/master/icon/China_Map.svg}
  - {name: Erotic, type: select, proxies: [Forein], use: [ç¥žå™¨ðŸ”¶, å›½é™…ðŸš, é­”æˆ’ðŸ’«], <<: *pt, icon: https://raw.githubusercontent.com/zhangruxianga/proxy/refs/heads/master/icon/Erotic.png}
  - {name: Quick, type: select, proxies: [Forein], use: [å›½é™…ðŸš, é­”æˆ’ðŸ’«, æœ€å¥½ðŸ’Ž], <<: *pt, icon: https://raw.githubusercontent.com/zhangruxianga/proxy/refs/heads/master/icon/Chaturbate.png}
  - {name: Lives, type: select, proxies: [Forein], use: [ç¥žå™¨ðŸ”¶, å›½é™…ðŸš, é­”æˆ’ðŸ’«], <<: *pt, icon: https://raw.githubusercontent.com/zhangruxianga/proxy/refs/heads/master/icon/Cblive.png}
  - {name: Google, type: select, proxies: [Forein], use: [ç¥žå™¨ðŸ”¶, å›½é™…ðŸš, é­”æˆ’ðŸ’«,  æœ€å¥½ðŸ’Ž], <<: *pt, icon: https://raw.githubusercontent.com/zhangruxianga/proxy/refs/heads/master/icon/Google.png}
  - {name: Yotube, type: select, proxies: [Forein], use: [ç¥žå™¨ðŸ”¶, å›½é™…ðŸš, é­”æˆ’ðŸ’«, æœ€å¥½ðŸ’Ž], <<: *pt, icon: https://raw.githubusercontent.com/zhangruxianga/proxy/refs/heads/master/icon/Youtube.png}
  - {name: Social, type: select, proxies: [Forein], use: [å¿«è·‘ðŸƒ, å›½é™…ðŸš], <<: *pt, icon: https://raw.githubusercontent.com/zhangruxianga/proxy/refs/heads/master/icon/Social.png}
  - {name: TikTok, type: select, proxies: [Forein], use: [ç¥žå™¨ðŸ”¶, å›½é™…ðŸš], <<: *pt, icon: https://raw.githubusercontent.com/zhangruxianga/proxy/refs/heads/master/icon/TikTok.png}
  - {name: Forein, type: select, use: [ç¥žå™¨ðŸ”¶, é­”æˆ’ðŸ’«, å›½é™…ðŸš, æœ€å¥½ðŸ’Ž, å¿«è·‘ðŸƒ], <<: *pt, icon: https://raw.githubusercontent.com/zhangruxianga/proxy/refs/heads/master/icon/Forein.png}
  - {name: FInaL, type: select, proxies: [ðŸŸ¢Direct, Domes, Forein], icon: https://raw.githubusercontent.com/zhangruxianga/proxy/refs/heads/master/icon/FInaL.png}


rules:
 - DST-PORT,53,ðŸ§­Dnsbak
 - RULE-SET,Aroce,Aroce
 - RULE-SET,Apple,Apple
 - RULE-SET,Pikpak,Cloud
 - RULE-SET,Domes,Domes
 - RULE-SET,Erotic,Erotic
 - RULE-SET,Lives,Lives
 - RULE-SET,Quick,Quick
 - RULE-SET,Telegram,Social
 - RULE-SET,X,Social
 - RULE-SET,TikTok,TikTok
 - RULE-SET,Github,Forein
 - RULE-SET,Youtube,Yotube
 - RULE-SET,Google,Google
 - RULE-SET,Proxy,Forein
 - RULE-SET,Gfw,Forein
 - RULE-SET,Owner,Forein
 - RULE-SET,Private,Domes
 - RULE-SET,CN,Domes
 - RULE-SET,telegram_i,Social,no-resolve
 - RULE-SET,google_i,Google,no-resolve
 - RULE-SET,cn_i,Domes
 - MATCH,FInaL

rule-anchor:
  ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: mrs}
  do: &do {type: http, interval: 86400, behavior: domain, format: mrs}
  qc: &qc {type: http, interval: 86400, behavior: domain, format: text}
  cl: &cl {type: http, interval: 86400, behavior: classical, format: text}
rule-providers:
  Aroce: {<<: *cl, url: "https://raw.githubusercontent.com/zhangruxianga/proxy/refs/heads/master/nikki/aroce.text", path: ./rules/aroce.text}
  Lives: {<<: *cl, url: "https://raw.githubusercontent.com/zhangruxianga/proxy/refs/heads/master/nikki/lives.text", path: ./rules/lives.text}

  Apple: {<<: *qc, url: "https://raw.githubusercontent.com/zhangruxianga/proxy/refs/heads/master/nikki/apple.txt", path: ./rules/apple.txt}
  Domes: {<<: *qc, url: "https://raw.githubusercontent.com/zhangruxianga/proxy/refs/heads/master/nikki/domes.txt", path: ./rules/domes.txt}
  Erotic: {<<: *qc, url: "https://raw.githubusercontent.com/zhangruxianga/proxy/refs/heads/master/nikki/erotic.txt", path: ./rules/erotic.txt}
  Owner: {<<: *qc, url: "https://raw.githubusercontent.com/zhangruxianga/proxy/refs/heads/master/nikki/owner.txt", path: ./rules/owner.txt}
  Quick: {<<: *qc, url: "https://raw.githubusercontent.com/zhangruxianga/proxy/refs/heads/master/nikki/quick.txt", path: ./rules/quick.txt}

  CN: {<<: *do, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs", path: ./rules/cn.mrs}
  Google: {<<: *do, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.mrs", path: ./rules/google.mrs}
  Github: {<<: *do, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.mrs", path: ./rules/github.mrs}
  Gfw: {<<: *do, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/gfw.mrs", path: ./rules/gfw.mrs}
  Netflix: {<<: *do, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/netflix.mrs", path: ./rules/netflix.mrs}
  Pikpak: {<<: *do, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/pikpak.mrs", path: ./rules/pikpak.mrs}
  Proxy: {<<: *do, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.mrs", path: ./rules/geolocation-!cn.mrs}
  Private: {<<: *do, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.mrs", path: ./rules/private.mrs}
  Telegram: {<<: *do, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.mrs", path: ./rules/telegram.mrs}
  TikTok: {<<: *do, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/tiktok.mrs", path: ./rules/tiktok.mrs }
  X: { <<: *do, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/twitter.mrs", path: ./rules/twitter.mrs }
  Youtube: {<<: *do, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.mrs", path: ./rules/youtube.mrs}
 
  cn_i: {<<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.mrs", path: ./rules/cn_i.mrs }
  google_i: {<<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/google.mrs", path: ./rules/google_i.mrs}
  netflix_i: {<<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/netflix.mrs", path: ./rules/netflix_i.mrs }
  telegram_i: {<<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/telegram.mrs", path: ./rules/telegram_i.mrs}

port: 8080
socks-port: 1080
redir-port: 7891
mixed-port: 7890
tproxy-port: 7892
bind-address: "*"
ipv6: false
mode: rule #è¿è¡Œæ¨¡å¼
log-level: warning #æ—¥å¿—çº§åˆ«
allow-lan: true #å…è®¸å±€åŸŸç½‘
unified-delay: true #ç»Ÿä¸€å»¶è¿Ÿ
tcp-concurrent: true #TCP å¹¶å‘
find-process-mode: off #è¿›ç¨‹åŒ¹é…æ¨¡å¼
global-client-fingerprint: chrome #å…¨å±€å®¢æˆ·ç«¯æŒ‡çº¹
keep-alive-idle: 600
keep-alive-interval: 15
disable-keep-alive: false
external-ui: ui
#external-ui-name: yacd
#external-ui-url: https://github.com/haishanh/yacd/archive/gh-pages.zip
external-ui-name: zashboard
external-ui-url: https://github.com/Zephyruso/zashboard/releases/latest/download/dist-cdn-fonts.zip
external-controller: 0.0.0.0:9090
secret: "123456"   #è‡ªå®šä¹‰ API çš„è®¿é—®å¯†é’¥

profile: #ç¼“å­˜
  store-selected: true
  store-fake-ip: false   #æŒä¹…åŒ– fake-ip

sniffer: #å—…æŽ¢åŸŸå
  enable: false
  force-dns-mapping: false #å¯¹ redir-host ç±»åž‹è¯†åˆ«çš„æµé‡è¿›è¡Œå¼ºåˆ¶å—…æŽ¢
  parse-pure-ip: false #å¯¹æ‰€æœ‰æœªèŽ·å–åˆ°åŸŸåçš„æµé‡è¿›è¡Œå¼ºåˆ¶å—…æŽ¢
  override-destination: false #æ˜¯å¦ä½¿ç”¨å—…æŽ¢ç»“æžœä½œä¸ºå®žé™…è®¿é—®ï¼Œé»˜è®¤ä¸º true

  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]
  force-domain: #éœ€è¦å¼ºåˆ¶å—…æŽ¢çš„åŸŸåï¼ˆé»˜è®¤æƒ…å†µä¸‹åªå¯¹IPè¿›è¡Œå—…æŽ¢ï¼‰
    - +.v2ex.com
  skip-domain: #éœ€è¦è·³è¿‡å—…æŽ¢çš„åŸŸåã€‚ä¸»è¦è§£å†³éƒ¨åˆ†ç«™ç‚¹sniå­—æ®µéžåŸŸåï¼Œå¯¼è‡´å—…æŽ¢ç»“æžœå¼‚å¸¸çš„é—®é¢˜ï¼Œå¦‚ç±³å®¶è®¾å¤‡Mijia Cloud
    - Mijia Cloud
    - dlg.io.mi.com
    - +.push.apple.com
    - +.apple.com
    - rule-set:CN,Private

tun:
  enable: true
  stack: mixed #tunæ¨¡å¼å †æ ˆ,å¯ç”¨å€¼ï¼šsystem/gvisor/mixed
  device: nikki
  mtu: 9000
  gso: true
  gso-max-size: 65536
  endpoint-independent-nat: false
  dns-hijack: ['any:53', 'tcp://any:53'] #dns åŠ«æŒï¼Œå°†åŒ¹é…åˆ°çš„è¿žæŽ¥å¯¼å…¥å†…éƒ¨ dns æ¨¡å—ï¼Œä¸ä¹¦å†™åè®®åˆ™ä¸º udp://
  auto-route: false #è‡ªåŠ¨è®¾ç½®å…¨å±€è·¯ç”±ï¼Œå¯ä»¥è‡ªåŠ¨å°†å…¨å±€æµé‡è·¯ç”±è¿›å…¥ tun ç½‘å¡
  auto-redirect: false
  auto-detect-interface: false #è‡ªåŠ¨é€‰æ‹©æµé‡å‡ºå£æŽ¥å£ï¼Œå¤šå‡ºå£ç½‘å¡åŒæ—¶è¿žæŽ¥çš„è®¾å¤‡å»ºè®®æ‰‹åŠ¨æŒ‡å®šå‡ºå£ç½‘å¡

dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: true #æ˜¯å¦è§£æž IPV6, å¦‚ä¸º false, åˆ™å›žåº” AAAA çš„ç©ºè§£æž
  enhanced-mode: fake-ip #å¯é€‰å€¼ fake-ip/redir-hostï¼Œé»˜è®¤redir-host
  fake-ip-range: 198.18.0.1/16 #fakeip ä¸‹çš„ IP æ®µè®¾ç½®ï¼Œtun çš„é»˜è®¤ IPV4 åœ°å€ ä¹Ÿä½¿ç”¨æ­¤å€¼ä½œä¸ºå‚è€ƒ
  fake-ip-filter-mode: blacklist #å¯é€‰ blacklist/whitelistï¼Œé»˜è®¤blacklistï¼Œwhitelist å³åªæœ‰åŒ¹é…æˆåŠŸæ‰è¿”å›ž fake-ip
  respect-rules: false #dns è¿žæŽ¥éµå®ˆè·¯ç”±è§„åˆ™ï¼Œéœ€é…ç½® proxy-server-nameserver
  prefer-h3: false #DOH ä¼˜å…ˆä½¿ç”¨ http/3
  use-system-hosts: false #æ˜¯å¦æŸ¥è¯¢ç³»ç»Ÿ hostsï¼Œé»˜è®¤ true
  use-hosts: false #æ˜¯å¦å›žåº”é…ç½®ä¸­çš„ hostsï¼Œé»˜è®¤ true
  fake-ip-filter: #é…ç½®ä¸ä½¿ç”¨fake-ipçš„åŸŸå
    - +.lan
    - +.local
    - rule-set:CN,Private
  nameserver:
    - 223.5.5.5
    - 2400:3200:baba::1
 

geodata-mode: true
geodata-loader: memconservative
geox-url:
  geosite: https://ghp.ci/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat
  mmdb: https://ghp.ci/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.metadb
  geoip: https://ghp.ci/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.dat
  asn: https://ghp.ci/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/GeoLite2-ASN.mmdb
geo-auto-update: false
geo-update-interval: 24
authentication:
  - nikki:123456